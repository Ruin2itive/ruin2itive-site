<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light" />

  <title>ruin2itive.org</title>
  <meta name="description" content="reliability first • open source • independent" />

  <style>
    :root{
      --paper:#f7f5f1;
      --ink:#151515;
      --muted:#666;
      --rule:#cfcac2;
      --accent:#7b1e1e; /* deep red */
      --max:720px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--paper);
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-family: Georgia, "Times New Roman", Times, serif;
    }

    /* page container */
    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding:20px 18px 36px;
    }

    /* MASTHEAD IMAGE (replaces text banner) */
    .masthead{
      width:100%;
      margin:0 auto 14px;
    }
    .masthead img{
      width:100%;
      height:auto;
      display:block;
      border:0;
    }

    /* top rule under masthead */
    .top-rule{
      height:1px;
      background:var(--rule);
      margin:10px 0 18px;
    }

    /* section headers */
    .section{
      margin:0 0 18px;
      padding:0 0 18px;
      border-bottom:1px solid var(--rule);
    }
    .section:last-of-type{ border-bottom:none; }

    .kicker{
      margin:0 0 10px;
      font-size:18px;
      letter-spacing:.08em;
      color:var(--accent);
      text-transform:lowercase;
      font-weight:700;
    }
    .kicker .slash{ color:var(--muted); font-weight:400; }

    /* list */
    .list{
      list-style:none;
      padding:0;
      margin:0;
    }
    .item{
      padding:10px 0 12px;
      border-top:1px solid rgba(0,0,0,.06);
    }
    .item:first-child{ border-top:none; }
    .title{
      margin:0 0 2px;
      font-size:30px;
      line-height:1.05;
      font-weight:700;
      letter-spacing:.01em;
    }
    .meta{
      margin:0;
      color:var(--muted);
      font-size:18px;
      letter-spacing:.02em;
    }

    /* feed rows */
    .feed-row{
      display:flex;
      gap:10px;
      align-items:baseline;
      padding:10px 0 12px;
      border-top:1px solid rgba(0,0,0,.06);
    }
    .feed-row:first-child{ border-top:none; }
    .feed-title{
      margin:0;
      font-size:20px;
      line-height:1.2;
      font-weight:700;
      flex: 1 1 auto;
    }
    .feed-src{
      font-size:14px;
      color:var(--muted);
      white-space:nowrap;
      flex: 0 0 auto;
    }
    a{ color:inherit; }
    a:hover{ text-decoration:underline; }

    /* loading text */
    .loading{
      margin:0;
      color:var(--muted);
      font-style:italic;
      font-size:22px;
      padding:6px 0 2px;
    }

    footer{
      margin-top:22px;
      color:var(--muted);
      font-size:16px;
    }

    /* make it feel snappy on mobile */
    @media (max-width:420px){
      .wrap{ padding:18px 16px 30px; }
      .title{ font-size:28px; }
      .meta{ font-size:17px; }
      .kicker{ font-size:17px; }
      .feed-title{ font-size:19px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- MASTHEAD (replace top text with a graphic) -->
    <header class="masthead" aria-label="ruin2itive masthead">
      <!-- Put your generated banner image here -->
      <img
        src="assets/masthead.webp"
        alt="ruin2itive — reliability • open source • independent"
        loading="eager"
        decoding="async"
      />
    </header>

    <div class="top-rule"></div>

    <!-- PROJECTS -->
    <section class="section" aria-label="projects">
      <h2 class="kicker">projects <span class="slash">/</span> the code</h2>

      <ul class="list">
        <li class="item">
          <p class="title"><a href="https://github.com/Ruin2itive" target="_blank" rel="noopener">ruin2itive</a></p>
          <p class="meta">github • src</p>
        </li>

        <li class="item">
          <p class="title"><a href="https://www.hackster.io/" target="_blank" rel="noopener">arduino</a></p>
          <p class="meta">hackster • hardware</p>
        </li>

        <li class="item">
          <p class="title"><a href="https://www.instructables.com/" target="_blank" rel="noopener">raspberry_pi</a></p>
          <p class="meta">instructables • diy</p>
        </li>
      </ul>
    </section>

    <!-- MARKETS / CRYPTO -->
    <section class="section" aria-label="markets">
      <h2 class="kicker">markets <span class="slash">/</span> crypto</h2>
      <p id="cryptoLoading" class="loading">loading feed...</p>
      <div id="cryptoFeed" aria-live="polite"></div>
    </section>

    <!-- HACKER NEWS -->
    <section class="section" aria-label="hacker news">
      <h2 class="kicker">hacker news</h2>
      <p id="hnLoading" class="loading">loading feed...</p>
      <div id="hnFeed" aria-live="polite"></div>
    </section>

    <footer>© <span id="year"></span> ruin2itive.org</footer>
  </div>

  <script>
    // Footer year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Renders one feed list into a container
    function renderFeed(container, items, sourceLabel) {
      container.innerHTML = "";
      if (!items || !items.length) {
        container.innerHTML = '<p class="loading">no items</p>';
        return;
      }

      for (const it of items) {
        const row = document.createElement("div");
        row.className = "feed-row";

        const title = document.createElement("p");
        title.className = "feed-title";

        const a = document.createElement("a");
        a.href = it.url || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = it.title || "untitled";

        title.appendChild(a);

        const src = document.createElement("div");
        src.className = "feed-src";
        src.textContent = sourceLabel || "";

        row.appendChild(title);
        row.appendChild(src);
        container.appendChild(row);
      }
    }

    async function loadHomeJson() {
      // This is your generated feed file (from your script)
      // Expected shape:
      // { sections: { crypto: [{title,url}], hacker: [{title,url}] } }
      const res = await fetch("data/home.json", { cache: "no-store" });
      if (!res.ok) throw new Error("home.json not found");
      return await res.json();
    }

    (async function main(){
      const cryptoLoading = document.getElementById("cryptoLoading");
      const hnLoading = document.getElementById("hnLoading");
      const cryptoFeed = document.getElementById("cryptoFeed");
      const hnFeed = document.getElementById("hnFeed");

      try {
        const data = await loadHomeJson();

        cryptoLoading.remove();
        hnLoading.remove();

        renderFeed(cryptoFeed, data?.sections?.crypto || [], "decrypt");
        renderFeed(hnFeed, data?.sections?.hacker || [], "hn");
      } catch (e) {
        // If your feed file isn't ready yet, keep the page clean and stable
        cryptoLoading.textContent = "feed offline (data/home.json missing)";
        hnLoading.textContent = "feed offline (data/home.json missing)";
      }
    })();
  </script>
</body>
</html>
