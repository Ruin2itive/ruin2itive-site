<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ruin2itive.org</title>

  <style>
    /* KEEP YOUR EXISTING STYLES ABOVE THIS LINE */
    /* Do not change hero/background CSS. */

    /* Projects section styling â€” matches your current "pill button" vibe */
    .panel {
      background: rgba(250, 248, 242, 0.92);
      border: 1px solid rgba(0,0,0,0.10);
      border-radius: 14px;
      padding: 18px 16px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }

    .panel-title {
      letter-spacing: .18em;
      text-transform: uppercase;
      font-size: 14px;
      margin: 0 0 14px 0;
    }

    .proj {
      padding: 14px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,0.10);
      background: rgba(255,255,255,0.65);
      margin-bottom: 12px;
    }

    .proj h3 {
      margin: 0 0 10px 0;
      font-size: 34px;
      line-height: 1.0;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .pillrow {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .pill {
      display: inline-block;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.18);
      background: rgba(255,255,255,0.55);
      text-decoration: none;
      color: #1a1a1a;
      letter-spacing: .18em;
      text-transform: uppercase;
      font-size: 12px;
    }

    .pill:active { transform: translateY(1px); }
  </style>
</head>

<body>
  <!-- KEEP YOUR EXISTING HERO / HEADER / ELEPHANT MARKUP EXACTLY AS-IS -->

  <!-- =========================================
       PROJECTS / THE CODE (AUTOMATED)
       This is the only section you replace.
       ========================================= -->
  <section class="panel" aria-label="Projects / The Code">
    <h2 class="panel-title">PROJECTS / THE CODE</h2>
    <div id="projects-root">
      <!-- Auto-filled from data/projects.json -->
    </div>
  </section>

  <script>
    async function loadProjects() {
      const root = document.getElementById("projects-root");
      try {
        const res = await fetch("./data/projects.json", { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();

        if (!data || !Array.isArray(data.groups)) {
          throw new Error("Invalid projects.json shape");
        }

        root.innerHTML = data.groups.map(group => {
          const title = String(group.title ?? "");
          const links = Array.isArray(group.links) ? group.links : [];
          const pills = links.map(l => {
            const label = String(l.label ?? "");
            const href = String(l.href ?? "#");
            const safeHref = href.startsWith("http") ? href : "#";
            return `<a class="pill" href="${safeHref}" target="_blank" rel="noopener">${label}</a>`;
          }).join("");

          return `
            <div class="proj">
              <h3>${title}</h3>
              <div class="pillrow">${pills}</div>
            </div>
          `;
        }).join("");

      } catch (err) {
        root.innerHTML = `
          <div class="proj">
            <h3>projects</h3>
            <div style="opacity:.7; font-size:14px;">
              Could not load links (data/projects.json).
            </div>
          </div>
        `;
        console.error(err);
      }
    }

    loadProjects();
  </script>
</body>
</html>
