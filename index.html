<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ruin2itive</title>

  <!-- Force cache refresh -->
  <link rel="stylesheet" href="/style.css?v=202602130815">
</head>

<body>
  <div class="page">

    <header class="mast">
      <h1 class="brand">ruin2itive</h1>
      <div class="tagline">reliability first · independent · open source</div>
      <hr class="rule">
    </header>

    <div class="sheet">
      <div class="watermark"></div>

      <!-- CRYPTO -->
      <section class="section">
        <div class="section-head">
          <div class="section-title">crypto</div>
          <div class="section-line"></div>
        </div>
        <div id="crypto-feed" class="feed-list"></div>
      </section>

      <!-- HACKER -->
      <section class="section">
        <div class="section-head">
          <div class="section-title">hacker</div>
          <div class="section-line"></div>
        </div>
        <div id="hacker-feed" class="feed-list"></div>
      </section>

      <!-- WORLD -->
      <section class="section">
        <div class="section-head">
          <div class="section-title">world</div>
          <div class="section-line"></div>
        </div>
        <div id="world-feed" class="feed-list"></div>
      </section>

    </div>

    <footer class="footer">
      <div class="updated" id="updated-stamp">loading…</div>
    </footer>

  </div>

<script>
async function loadFeeds() {
  try {
    const res = await fetch('/data/home.json?v=' + Date.now());
    const data = await res.json();

    function render(sectionId, items) {
      const container = document.getElementById(sectionId);
      container.innerHTML = '';

      if (!items || items.length === 0) {
        container.innerHTML = '<div class="feed-status">no data</div>';
        return;
      }

      items.slice(0,2).forEach(item => {
        const div = document.createElement('div');
        div.className = 'feed-item';
        div.innerHTML = `
          <h3><a href="${item.url}" target="_blank">${item.title}</a></h3>
          <div class="feed-meta">${item.source} · ${item.time}</div>
        `;
        container.appendChild(div);
      });
    }

    render('crypto-feed', data.sections.crypto);
    render('hacker-feed', data.sections.hacker);
    render('world-feed', data.sections.world);

    document.getElementById('updated-stamp').innerText =
      'updated ' + data.updated_iso;

  } catch (e) {
    console.error(e);
  }
}

loadFeeds();
</script>

</body>
</html>
